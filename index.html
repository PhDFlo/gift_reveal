<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Special Surprise</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lato:wght@300;400&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body>
    <div class="stars"></div>
    <div class="twinkling"></div>

    <main class="container">
        <header>
            <h1>Une M√©lodie Secr√®te</h1>
            <p class="subtitle">Devine pour r√©v√©ler la surprise...</p>
        </header>

        <!-- PROGRESS BAR -->
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>

        <!-- STAGE 0: WELCOME -->
        <section id="welcome-screen" class="game-stage active">
            <h2>Bienvenue</h2>
            <p class="instruction">Pr√™t √† d√©couvrir ta surprise ?</p>
            <div class="controls">
                <button class="btn primary" onclick="startGame()">Commencer l'aventure</button>
            </div>
        </section>

        <!-- STAGE 1: SUTOM (ARENA) -->
        <section id="stage-1" class="game-stage hidden">
            <h2>√âtape 1 : Le Sutom Musical</h2>
            <p class="instruction">Trouve le mot cach√© (5 lettres). Un lieu de spectacle...</p>
            
            <div id="sutom-grid" class="sutom-grid">
                <!-- Grid generated by JS -->
            </div>
            
            <div class="keyboard" id="keyboard">
                <!-- Keyboard generated by JS -->
            </div>

            <div class="controls">
                <button class="btn secondary" onclick="restartStep()">Recommencer l'√©tape</button>
                <button id="sutom-hint-btn" class="btn secondary hidden" onclick="revealSutomLetter()" style="color: var(--primary-gold); border-color: var(--primary-gold);">üí° R√©v√©ler une lettre</button>
            </div>
        </section>

        <!-- STAGE 2: CHARADE -->
        <section id="stage-2" class="game-stage hidden">
            <h2>√âtape 2 : L'√âpigramme</h2>
            <div class="riddle-box">
                <p>"My first is what you do when words are not enough.</p>
                <p>My second is what you whisper when hope listens.</p>
                <p>My whole is a song that lifts the soul."</p>
            </div>
            
            <div class="input-group">
                <input type="text" id="answer-2" placeholder="Votre r√©ponse..." autocomplete="off">
                <button class="btn primary" onclick="checkStage2()">Deviner</button>
            </div>

            <div class="controls">
                <button class="btn secondary" onclick="restartStep()">Recommencer l'√©tape</button>
            </div>
        </section>

        <!-- STAGE 3: TRIVIA -->
        <section id="stage-3" class="game-stage hidden">
            <h2>√âtape 3 : La Question</h2>
            <p class="question-text">Dans quel pays est n√©e la langue qui sert encore de r√©f√©rence internationale pour la musique classique ?</p>
            
            <div class="input-group">
                <input type="text" id="answer-3" placeholder="Pays..." autocomplete="off">
                <button class="btn primary" onclick="checkStage3()">Valider</button>
            </div>

            <div class="controls">
                <button class="btn secondary" onclick="restartStep()">Recommencer l'√©tape</button>
            </div>
        </section>

        <!-- STAGE 4: HANGMAN (BOCELLI) -->
        <section id="stage-4" class="game-stage hidden">
            <h2>√âtape 4 : Le Pendu</h2>
            <p class="instruction">Qui est l'artiste ?</p>
            
            <div class="hangman-display" id="hangman-display">
                <svg height="250" width="200" id="hangman-svg" class="hangman-svg">
                    <!-- Static Gallows -->
                    <g class="gallows">
                        <line x1="10" y1="240" x2="150" y2="240" />
                        <line x1="80" y1="240" x2="80" y2="20" />
                        <line x1="80" y1="20" x2="140" y2="20" />
                        <line x1="140" y1="20" x2="140" y2="50" />
                    </g>
                    <!-- Dynamic Body Parts -->
                    <circle cx="140" cy="70" r="20" class="draw" /> <!-- Head -->
                    <line x1="140" y1="90" x2="140" y2="150" class="draw" /> <!-- Body -->
                    <line x1="140" y1="100" x2="110" y2="130" class="draw" /> <!-- Arm L -->
                    <line x1="140" y1="100" x2="170" y2="130" class="draw" /> <!-- Arm R -->
                    <line x1="140" y1="150" x2="120" y2="190" class="draw" /> <!-- Leg L -->
                    <line x1="140" y1="150" x2="160" y2="190" class="draw" /> <!-- Leg R -->
                </svg>
            </div>

            <div id="hangman-word" class="hangman-word">
                <!-- _ _ _ _ _ _ _ -->
            </div>

            <div class="keyboard" id="hangman-keyboard">
                <!-- Keyboard generated by JS -->
            </div>

            <div class="controls">
                <button class="btn secondary" onclick="restartStep()">Recommencer l'√©tape</button>
            </div>
        </section>

        <!-- FINAL REVEAL -->
        <section id="final-reveal" class="game-stage hidden">
            <div class="ticket-card">
                <div class="ticket-header">
                    <h2>F√©licitations !</h2>
                </div>
                <div class="ticket-body">
                    <h3>CONCERT EXCLUSIF</h3>
                    <p class="artist">ANDREA BOCELLI</p>
                    <div class="ticket-details">
                        <div class="detail-item">
                            <span class="label">Lieu</span>
                            <span class="value">Paris La D√©fense Arena</span>
                        </div>
                        <div class="detail-item">
                            <span class="label">Date</span>
                            <span class="value">1er Avril</span>
                        </div>
                    </div>
                    <p class="love-note">Joyeux Cadeau mon amour ‚ù§Ô∏è</p>
                </div>
            </div>
        </section>
    </main>
    <div id="notification-area"></div>
    <script src="script.js"></script>
</body>
</html>
